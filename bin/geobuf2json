#!/usr/bin/env node

var decode = require('../decode'),
    fs = require('fs'),
    concat = require('concat-stream');

var input = process.stdin.isTTY ? fs.createReadStream(process.argv[2]) : process.stdin;

input.pipe(concat(function (buffer) {
    // console.time('decode');
    var geojson = decode(buffer);
    // console.timeEnd('decode');

    // console.time('stringify');
    var data = JSON.stringify(geojson);
    // console.timeEnd('stringify');

    // console.time('JSON.parse');
    // JSON.parse(data);
    // console.timeEnd('JSON.parse');

    process.stdout.write(Buffer.from(data));
}));
